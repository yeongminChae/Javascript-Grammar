#### 📚 1. 가상 DOM이란?
> 💡 가상 DOM이란?
* 가상 돔은 실제 돔과 같은 내용을 담고 있는 복사본
* 가상 돔은 실제 돔이 아닌 자바스크립트 객체 형태로 메모리에 저장되어 있음.
* 가상 돔은 실제 돔이 갖고 있는 모든 엘리먼트들과 속성을 갖고 있지만 실제 돔과는 달리 브라우저에 문서에 직접적으로 접근을 할 수 없음. (즉 실제 인터페이스를 직접 수정할 수 없음)
![](https://velog.velcdn.com/images/codudals98/post/880cf684-cce5-4530-beb9-99570f7c4e03/image.png)

#### 📚 2. 기존 DOM 조작과정과 리액트에서의 가상 DOM
> 💡 기존 DOM 조작과정
* 브라우저가 수정하고 싶은 페이지의 html을 탐색해 해당 엘리먼트를 찾고 위 엘리먼트들과, 자녀엘리먼트들을 돔에서 제거 후 새롭게 수정된 엘리먼트 들로 교체함.
* 그리고 나서 css를 다시 계산해 레이아웃 정보를 알맞게 수정하고, 해당 내용을 바탕으로 다시 브라우저세 그려줌.
* 알고리즘을 통해 위 과정을 효율적으로 수행할 수 있음, 그러나 이처럼 업데이트와 동시에 모든 내용을 다시 렌더링 하는 과정 자체는 복잡하고 시간이 걸리는 작업임.
####
> 💡 리액트에서의 가상 DOM
* 가상 돔은 실제 돔과는 다르게 실제 화면의 보이는 ui들을 수정할 수 있게 해주는 api들을 제공해주지 않음.
* 가상돔은 메모리에 존재하는 단순하 자바스크립트 객체 그러므로 생성하고 접근하는 것은 가볍고 빠른 작업임.
* 리액트는 항상 두 개의 가상 돔을 가지고 있음. (렌더링 이전에 화면 구조를 담은 객체와 렌더링 이후에 보이기 될 화면 구조를 담은 개체)
* 리액트는 state가 변경될 때마다 화면이 새롭게 렌더링 됨, 이렇게 렌더링 될 상황이 생길 때마다 리액트는 새로운 내용을 담은 가상 돔을 생성함
* 그 이후 업데이트 이전의 가상 돔과 이후 가상 돔을 비교하며 바뀐 엘리먼트들을 찾아 냄
* 이렇게 이전 이후 가상 돔을 비교하는 과정을 리액트에선 디핑(diffing)이라고 함.![](https://velog.velcdn.com/images/codudals98/post/6d662e8a-1864-4629-9f62-cf18572e8570/image.png)
* 이 디핑 과정은 굉장히 빠르고 효율적인 알고리즘을 사용하기에, 리액트는 딱 바뀐 부분들만 실제 돔의 적용시켜줌.
* 바뀐 부분만 실제 돔의 적용시켜주는 과정을 리컨실리에이션(reconciliation)이라고 함.![](https://velog.velcdn.com/images/codudals98/post/979ffdfd-330b-4b34-8b27-b5f5b7e6139f/image.png)
####
> 💡 Batch Update
* Batch는 집단이라는 뜻을 가짐
* Batch Update는 변경된 모든 엘리먼트들을 집단으로 실제 돔에 한번에 적용시켜주는 것을 의미
* ex) 10개의 엘리먼트들을 갖는 list에 값이 10번 수정 될 경우, 각각 한번씩 총 10씩 업데이트 하는 것이 아니라 이 수정값들을 한번에 적용시켜주는것을 의미.
* 돔에서 가장 비용이 많이 드는 작업은 바로 이렇게 화면에 바끤 내용들을 그려주는 것, 리액트는 가상 돔과 배치 업데이트를 통해 이 과정을 효율적으로 작동시킴.



